---
title: "íŒŒì´ì¬ ìŠ¤í‹°ì»¤"
date: 2021-10-12
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
categories:
  - Python
excerpt: "íŒŒì´ì¬ìœ¼ë¡œ í™”ë©´ ìŠ¤í‹°ì»¤ ë§Œë“¤ê¸°"
---
***

íŒŒì´ì¬ìœ¼ë¡œ í™”ë©´ ìŠ¤í‹°ì»¤ë¥¼ ë§Œë“¤ì–´ ë³¼ê²ë‹ˆë‹¤.

## ğŸ‘ï¸ë¯¸ë¦¬ë³´ê¸°

![sticker](https://user-images.githubusercontent.com/83404333/136938799-fef93d3e-4edc-4bd5-be75-bdd0eeedd784.gif){: .round}

ìœ„ì™ ê°™ì´ ì´ë¯¸ì§€ ë˜ëŠ” ì›€ì§ì´ëŠ” ì´ë¯¸ì§€ë¥¼ í™”ë©´ì— ë„ìš¸ ìˆ˜ ìˆê³ 

## ğŸ”¨ë§Œë“¤ê¸°

í•„ìˆ˜ íŒ¨í‚¤ì§€:
- Python
- PyQt5

ì½”ë“œ:

<div>
<details markdown="1">
<summary>{% include code title='sticker.py' %} ë„ˆë¬´ ê¸¸ì–´ìš” ã…</summary>

```python
import sys
from PyQt5 import QtCore, QtWidgets, QtGui
from PyQt5.QtGui import QMovie


class Sticker(QtWidgets.QMainWindow):
    def __init__(self, img_path, xy, size=1.0, on_top=False):
        super(Sticker, self).__init__()
        self.timer = QtCore.QTimer(self)
        self.img_path = img_path
        self.xy = xy
        self.from_xy = xy
        self.from_xy_diff = [0, 0]
        self.to_xy = xy
        self.to_xy_diff = [0, 0]
        self.speed = 60
        self.direction = [0, 0]  # x: 0(left), 1(right), y: 0(up), 1(down)
        self.size = size
        self.on_top = on_top
        self.localPos = None

        self.setupUi()
        self.show()

    # ë§ˆìš°ìŠ¤ ë†“ì•˜ì„ ë•Œ
    def mouseReleaseEvent(self, a0: QtGui.QMouseEvent) -> None:
        if self.to_xy_diff == [0, 0] and self.from_xy_diff == [0, 0]:
            pass
        else:
            self.walk_diff(self.from_xy_diff, self.to_xy_diff,
                           self.speed, restart=True)

    # ë§ˆìš°ìŠ¤ ëˆŒë €ì„ ë•Œ
    def mousePressEvent(self, a0: QtGui.QMouseEvent):
        self.localPos = a0.localPos()

    # ë“œë˜ê·¸ í•  ë•Œ
    def mouseMoveEvent(self, a0: QtGui.QMouseEvent):
        self.timer.stop()
        self.xy = [(a0.globalX() - self.localPos.x()),
                   (a0.globalY() - self.localPos.y())]
        self.move(*self.xy)

    # def walk(self, from_xy, to_xy, speed=60):
    #     self.from_xy = from_xy
    #     self.to_xy = to_xy
    #     self.speed = speed

    #     self.timer = QtCore.QTimer(self)
    #     self.timer.timeout.connect(self.__walkHandler)
    #     self.timer.start(1000 / self.speed)

    # ì´ˆê¸° ìœ„ì¹˜ë¡œë¶€í„°ì˜ ìƒëŒ€ì  ê±°ë¦¬ë¥¼ ì´ìš©í•œ walk
    def walk_diff(self, from_xy_diff, to_xy_diff, speed=60, restart=False):
        self.from_xy_diff = from_xy_diff
        self.to_xy_diff = to_xy_diff
        self.from_xy = [self.xy[0] + self.from_xy_diff[0],
                        self.xy[1] + self.from_xy_diff[1]]
        self.to_xy = [self.xy[0] + self.to_xy_diff[0],
                      self.xy[1] + self.to_xy_diff[1]]
        self.speed = speed
        if restart:
            self.timer.start()
        else:
            self.timer.timeout.connect(self.__walkHandler)
            self.timer.start(1000 / self.speed)

    def __walkHandler(self):
        if self.xy[0] >= self.to_xy[0]:
            self.direction[0] = 0
        elif self.xy[0] < self.from_xy[0]:
            self.direction[0] = 1

        if self.direction[0] == 0:
            self.xy[0] -= 1
        else:
            self.xy[0] += 1

        if self.xy[1] >= self.to_xy[1]:
            self.direction[1] = 0
        elif self.xy[1] < self.from_xy[1]:
            self.direction[1] = 1

        if self.direction[1] == 0:
            self.xy[1] -= 1
        else:
            self.xy[1] += 1

        self.move(*self.xy)

    def setupUi(self):
        centralWidget = QtWidgets.QWidget(self)
        self.setCentralWidget(centralWidget)

        flags = QtCore.Qt.WindowFlags(
            QtCore.Qt.FramelessWindowHint | QtCore.Qt.WindowStaysOnTopHint if self.on_top else QtCore.Qt.FramelessWindowHint)
        self.setWindowFlags(flags)
        self.setAttribute(QtCore.Qt.WA_NoSystemBackground, True)
        self.setAttribute(QtCore.Qt.WA_TranslucentBackground, True)

        label = QtWidgets.QLabel(centralWidget)
        movie = QMovie(self.img_path)
        label.setMovie(movie)
        movie.start()
        movie.stop()

        w = int(movie.frameRect().size().width() * self.size)
        h = int(movie.frameRect().size().height() * self.size)
        movie.setScaledSize(QtCore.QSize(w, h))
        movie.start()

        self.setGeometry(self.xy[0], self.xy[1], w, h)

    def mouseDoubleClickEvent(self, e):
        QtWidgets.qApp.quit()


def distance(x, y):
    if x >= y:
        result = x - y
    else:
        result = y - x
    return result


if __name__ == '__main__':
    app = QtWidgets.QApplication(sys.argv)
    msgbox = QtWidgets.QMessageBox()
    argument = sys.argv

    # s = Sticker('gif/azzazel.gif', xy=[80, 200], size=1.0, on_top=True)
    if len(argument) >= 3:
        g = Sticker(argument[1], xy=list(map(int, argument[4].split(','))), size=float(
            argument[2]), on_top=bool(int(argument[3])))

    else:
        QtWidgets.qApp.quit()
        sys.exit()

    try:
        frm = list(map(int, argument[5].split(',')))
        to = list(map(int, argument[6].split(',')))
        g.walk_diff(from_xy_diff=frm, to_xy_diff=to, speed=int(argument[7]))

    except:
        pass

    # gif/gura.gif 0.2 1 200,180 200,200 120
    # to
    # g = Sticker('gif/gura.gif', xy=[200, 200], size=0.2, on_top=True)
    # g.walk_diff(from_xy_diff=[-100, 0], to_xy_diff=[100, 0], speed=180)

    sys.exit(app.exec_())

```

</details>
</div><br>ìœ„ì˜ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.  

â—í˜¹ì‹œ ì‹¤í–‰íŒŒì¼(.exe)ë¡œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ Pyinstaller ë¥¼ ì“°ì‹œë©´ ë©ë‹ˆë‹¤!
{: .notice--success}

ë§Œë“¤ê¸° ë!

## ğŸ”¥ì‚¬ìš©í•´ë³´ê¸°

ì½”ë“œê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ì— í„°ë¯¸ë„ì„ ì—´ì–´ì¤ë‹ˆë‹¤.

```batch
> sticker.py images/gura.gif 0.2 1 10,10 -100,0 100,0 120
```

### â—í•„ìˆ˜ ì„¤ì •

1. ë²ˆì§¸ëŠ” íŒŒì¼ì˜ ê²½ë¡œì…ë‹ˆë‹¤.
2. ë²ˆì§¸ëŠ” ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤. ì´ë¯¸ì§€ì˜ ê¸°ë³¸ í¬ê¸°ê°€ 1ì…ë‹ˆë‹¤.
  - ë„ˆë¬´ í´ë•ŒëŠ” 0.2 ê°™ì´ ì†Œìˆ˜ë¡œ ì“°ì‹œë©´ ë©ë‹ˆë‹¤.
3. <span class='var'>sticker.py</span>ë’¤ì—ì„œ 3ë²ˆì§¸ëŠ” ìŠ¤í‹°ì»¤ê°€ í•­ìƒ ìœ„ì— ìˆì„ì§€ì…ë‹ˆë‹¤.
  - <span class='yellow'>0</span>ì„ ë„£ìœ¼ë©´ í‰ë²”í•œ ìœˆë„ìš°ì²˜ëŸ¼ ì‘ë™í•©ë‹ˆë‹¤.
  - <span class='yellow'>1</span>ì„ ë„£ìœ¼ë©´ í•­ìƒ ìœ„ì— ìˆê²Œ ì„¤ì •í•©ë‹ˆë‹¤.
4. ë²ˆì§¸ëŠ” ìŠ¤í‹°ì»¤ì˜ ê¸°ë³¸ <span class='yellow'>X, Y</span>ìœ„ì¹˜ì…ë‹ˆë‹¤.
    ","ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤. (ë„ì–´ì“°ê¸°ê°€ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤!)

### âœ…ì„ íƒ ì„¤ì •

1. ë²ˆì§¸ëŠ” ìŠ¤í‹°ì»¤ê°€ ì›€ì§ì¼ë•Œ ê¸°ë³¸ ìœ„ì¹˜ì…ë‹ˆë‹¤. <span class='yellow'>X, Y</span>ìˆœì„œì´ê³  ì ˆëŒ€ ìœ„ì¹˜ê°€ ì•„ë‹Œ ìƒëŒ€ ìœ„ì¹˜ì…ë‹ˆë‹¤.
2. ë²ˆì§¸ëŠ” ìŠ¤í‹°ì»¤ê°€ ì›€ì§ì¼ë•Œ ì›€ì§ì¼ ìœ„ì¹˜ì…ë‹ˆë‹¤. <span class='yellow'>X, Y</span>ìˆœì„œì´ê³  ì ˆëŒ€ ìœ„ì¹˜ê°€ ì•„ë‹Œ ìƒëŒ€ ìœ„ì¹˜ì…ë‹ˆë‹¤.
3. ë²ˆì§¸ëŠ” ìŠ¤í‹°ì»¤ê°€ ì›€ì§ì¼ë•Œ ì†ë„ì…ë‹ˆë‹¤. <span class='yellow'>120</span>ì´ ì ë‹¹í•©ë‹ˆë‹¤.(<span class='yellow'>120</span> ìƒê°ë³´ë‹¤ ëŠë ¤ìš”.)

## ğŸ–ï¸ë§ˆë¬´ë¦¬

ì´ë ‡ê²Œ íŒŒì´ì¬ìœ¼ë¡œ ìŠ¤í‹°ì»¤ ë§Œë“œëŠ”ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.  
ì´ìƒìœ¼ë¡œ **{{ page.title }}** í¬ìŠ¤íŒ…ì„ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.
